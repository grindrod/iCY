<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> 
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>ClereMed</title>
        
        <script>
            var optionsSetting = JSON.parse(localStorage.getItem('optionsSetting'));
            var prevResults = JSON.parse(localStorage.getItem('results'));
            
            window.localStorage.clear();
            
            if (optionsSetting == null){ optionsSetting = {}; }
            if (prevResults == null){ 
                console.log("PREV RESULTS DIDNT EXIST!");
                prevResults = {}; 
                prevResults['userID'] = 0;
            } 
            
            // By default, show the Medications page
            if (optionsSetting['medPage'] == null){ optionsSetting['medPage'] = true; }

            console.log(optionsSetting);
            localStorage.setItem('optionsSetting', JSON.stringify(optionsSetting));
            
            // ADVICE 
           	var adviceToUse = {};
            adviceToUse['standardLabel'] = true;        // everyone
            adviceToUse['numbers'] = true;              // everyone
            adviceToUse['simpleLang'] = true;           // everyone
            adviceToUse['notAllCaps'] = true;           // everyone
            adviceToUse['noTape'] = true;               // exception cases in questionnaire
            adviceToUse['ableReadStandard'] = false;
            adviceToUse['notAbleReadStandard'] = false;
            adviceToUse['notAbleReadLarge'] = false;
            adviceToUse['printDuplicate'] = false;
            adviceToUse['matchDuplicate'] = false;
            adviceToUse['routineAssess'] = false;
            adviceToUse['compliancePackaging'] = false;
            adviceToUse['usesLargePrint'] = false;
            adviceToUse['difficultyReadLabels'] = false;
            adviceToUse['difficultyReadNonPrescription'] = false;
            adviceToUse['difficultyReadWorn'] = false;
            adviceToUse['difficultyReadGlossy'] = false;
            adviceToUse['difficultyDiscuss'] = false;
            adviceToUse['discussCompliance'] = false;
            adviceToUse['counsel'] = false;
            adviceToUse['discussMagnifying'] = false;
            adviceToUse['discussGlassLargePrint'] = false;
            
            console.log(adviceToUse);
            //console.log(JSON.stringify(adviceToUse) );
            localStorage.setItem ('adviceToUse', JSON.stringify(adviceToUse) );
            
            // RESULTS TO SEND TO SERVER
            var results = {};
            results['datetime'] = new Date();
            var prevUserID = prevResults['userID'] + 1;
            console.log("prevUserID: " + prevUserID);
            results['userID'] = prevResults['userID'] + 1;
            console.log(results);
            localStorage.setItem ('results', JSON.stringify(results) );
            
            document.ontouchmove = function(e){ e.preventDefault(); }
        </script>
        
        <link rel="stylesheet" href="../style/common.css" />
        <style>
            #indexText {
                position: absolute;
                top: 35%;
            }
        </style>
        
    </head>
    
	<body class="center-wrapper">
		<br /><h1>ClereMed</h1>
        
		<h1 id="indexText">Welcome! This is a quick screen of your ability to read medication labels.</h1>
		
		<button id="indexNext" class="greenBtn indexBtn" ontouchend="window.location.href='questionnaire1.html'" onclick="window.location.href='questionnaire1.html'">Touch here to start -></button>
	</body>
    
</html>